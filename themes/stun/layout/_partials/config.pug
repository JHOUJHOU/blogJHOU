-
  var algolia = "undefined";
  var env = process.env;
  if (theme.algolia_search && theme.algolia_search.enable) {
    algolia = JSON.stringify({
      appId: env.ALGOLIA_APP_ID || config.algolia.appId || config.algolia.applicationID,
      apiKey: env.ALGOLIA_API_KEY || config.algolia.apiKey,
      indexName: env.ALGOLIA_INDEX_NAME || config.algolia.indexName,
      hits: theme.algolia_search.hits,
      languages: {
        input_placeholder: __("algolia_search.input_placeholder"),
        hits_empty: __("algolia_search.hits_empty"),
        hits_stats: __("algolia_search.hits_stats")
      }
    });
  } 

  var fontawesome = "undefined";
  if (theme.fa_prefix) {
    fontawesome = JSON.stringify({
      prefix: theme.fa_prefix
    });
  }

  var sidebar = "undefined";
  if (theme.sidebar && theme.sidebar.enable) {
    sidebar = JSON.stringify({
      offsetTop: theme.sidebar.offsetTop,
      tocMaxDepth: theme.toc.max_depth
    });
  }

  var back2top = "undefined";
  if (theme.back2top && theme.back2top.enable) {
    back2top = JSON.stringify({
      enable: theme.back2top.enable
    });
  }

  var codeStyle = (theme.codeblock && theme.codeblock.style) || 'default';
  var highlight = (theme.codeblock && theme.codeblock.highlight) || 'light';
  var wordWrap = (theme.codeblock && theme.codeblock.word_wrap) || false;
  var codeblock = JSON.stringify({
    style: codeStyle,
    highlight: highlight,
    word_wrap: wordWrap
  });

  var header = "undefined";
  if (theme.header) {
    var isScrollDownIcon =
      (theme.header.scroll_down_icon && theme.header.scroll_down_icon.enable) || false;

    header = JSON.stringify({
      scrollDownIcon: isScrollDownIcon,
    });
  }

  var post_widget = "undefined";
  if (theme.post_widget) {
    var end_text = (theme.post_widget.end_text && theme.post_widget.end_text.enable) || false;

    if (end_text) {
      post_widget = JSON.stringify({
        end_text: end_text,
      });
    }
  }

  var night_mode = "undefined";
  if (theme.night_mode) {
    night_mode = JSON.stringify({
      enable: theme.night_mode.enable,
    });
  }

  var gallery_waterfall = "undefined";
  if (theme.gallery_waterfall && theme.gallery_waterfall.enable) {
    gallery_waterfall = JSON.stringify(theme.gallery_waterfall);
  }

  var lazyload = "undefined";
  if (theme.lazyload && theme.lazyload.enable) {
    lazyload = JSON.stringify(theme.lazyload);
  }

  var zoom_image = "undefined";
  if (theme.zoom_image && theme.zoom_image.enable) {
    zoom_image = JSON.stringify(theme.zoom_image);
  }

  var pjax_config = "undefined";
  if (theme.pjax && theme.pjax.enable) {
    pjax_config = JSON.stringify({
      scrollTo2screen: theme.pjax.scrollTo2screen
    });
  }

  var external_link = "undefined";
  if (theme.external_link) {
    var iconConfig = {};
    var iconEnable = false;
    var iconName = '';

    if (theme.external_link.icon) {
      iconEnable = theme.external_link.icon.enable;

      if (iconEnable) {
        iconName = theme.external_link.icon.name;
      }

      iconConfig = { enable: iconEnable, name: iconName }
    }

    external_link = JSON.stringify({
      icon: iconConfig
    });
  }

  var shortcuts = "undefined";
  if (theme.shortcuts) {
    isSwitchPost = false;

    if (theme.shortcuts.switch_post && theme.shortcuts.switch_post.enable) {
      isSwitchPost = true;
    }

    shortcuts = JSON.stringify({
      switch_post: isSwitchPost
    });
  }

  var prompt = JSON.stringify({
    copy_success: __("prompt.copy.success"),
    copy_error: __("prompt.copy.error"),
    creative_commons: __("prompt.creative_commons"),
    copy_button: __("prompt.copy_button")
  });

script.
  var Stun = window.Stun || {};
  var CONFIG = {
    root: '!{ config.root }',
    algolia: !{ algolia },
    fontawesome: !{ fontawesome },
    sidebar: !{ sidebar },
    header: !{ header },
    post_widget: !{ post_widget },
    night_mode: !{ night_mode },
    back2top: !{ back2top },
    codeblock: !{ codeblock },
    reward: !{ theme.reward.enable },
    fancybox: !{ theme.fancybox },
    zoom_image: !{ zoom_image },
    gallery_waterfall: !{ gallery_waterfall },
    lazyload: !{ lazyload },
    pjax: !{ pjax_config },
    external_link: !{ external_link },
    shortcuts: !{ shortcuts },
    prompt: !{ prompt }
  };

  window.CONFIG = CONFIG;
